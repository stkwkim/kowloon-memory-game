<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»å‹™1ï¼šå·¥æ¥­è¨˜æ†¶è¦ºé†’ - ä¹é¾è¨˜æ†¶åº«</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
        }
        .instruction {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            padding: 20px;
            text-align: center;
            z-index: 1000;
        }
        .password-display {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #00b09b, #96c93d);
            padding: 25px 35px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border: 3px solid #FFD700;
            display: none;
            z-index: 1001;
            min-width: 300px;
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateX(-50%) translateY(0px); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1002;
            font-size: 1.2em;
        }
        .hint-system {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            z-index: 1000;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        .hint-toggle {
            background: #4FC3F7;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
            margin-bottom: 10px;
        }
        .hint-content {
            display: none;
            color: white;
            font-size: 0.9em;
            line-height: 1.5;
        }
        .hint-section {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #2a5298);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- åŠ è½½ç•Œé¢ -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <h3>ARç³»çµ±åŠ è¼‰ä¸­</h3>
        <p>è«‹ç¨å€™...</p>
    </div>

    <!-- ä¸»ç•Œé¢ -->
    <div id="mainInterface" style="display: none;">
        <!-- è¿”å›æŒ‰é’® -->
        <button class="back-button" onclick="goBack()">â†</button>

        <!-- æ“ä½œæŒ‡å¼• -->
        <div class="instruction">
            <h2>ğŸ” ä»»å‹™1ï¼šå·¥æ¥­è¨˜æ†¶æƒæ</h2>
            <p>è«‹æƒæ<b>ç‰›æ£šè—è¡“æ‘ä¸»ç´…ç£šæ‹±é–€ä¸‹ç¬¬ä¸‰æ’çš„è±å½¢ç£šå¡Šåœ–æ¡ˆ</b></p>
            <p>ä¿æŒæ‰‹æ©Ÿç©©å®šï¼Œç¢ºä¿å…‰ç·šå……è¶³</p>
        </div>

        <!-- ARåœºæ™¯ -->
        <a-scene 
            embedded 
            arjs="sourceType: webcam; 
                   debugUIEnabled: false; 
                   detectionMode: mono; 
                   maxDetectionRate: 60;"
            renderer="logarithmicDepthBuffer: true;
                      precision: high;"
            vr-mode-ui="enabled: false"
        >
            <!-- å·¥ä¸šè®°å¿†æ ‡è®° -->
            <a-marker 
                id="industryMarker"
                type="pattern" 
                url="patterns/task1.patt"
                smooth="true"
                smoothCount="10"
                smoothTolerance="0.01"
                emitevents="true"
                size="0.5"
            >
                <!-- 3Då¯†ç æ–‡å­— -->
                <a-text 
                    value="7391" 
                    position="0 0.8 0" 
                    align="center"
                    color="#FFD700"
                    scale="2.5 2.5 2.5"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 4000"
                ></a-text>
                
                <!-- æ—‹è½¬çš„å·¥ä¸šé½¿è½® -->
                <a-entity
                    geometry="primitive: cylinder; radius: 0.4; height: 0.15; segmentsRadial: 24"
                    material="color: #8B4513; roughness: 0.7; metalness: 0.3"
                    position="0 0.3 0"
                    animation="property: rotation; to: 360 0 0; loop: true; dur: 3000"
                ></a-entity>
                
                <!-- æµ®åŠ¨ç²’å­æ•ˆæœ -->
                <a-entity
                    particle-system="preset: dust; 
                                    color: #FF6B6B, #4FC3F7; 
                                    particleCount: 150;"
                    position="0 0.5 0"
                ></a-entity>
            </a-marker>
            
            <!-- é™æ€ç›¸æœº -->
            <a-entity camera></a-entity>

            <!-- ç¯å¢ƒå…‰ -->
            <a-entity light="type: ambient; color: #FFFFFF; intensity: 0.6"></a-entity>
            <a-entity light="type: directional; color: #FFFFFF; intensity: 0.8" position="1 1 1"></a-entity>
        </a-scene>

        <!-- å¯†ç æ˜¾ç¤º -->
        <div class="password-display" id="passwordBox">
            <h3>ğŸ¯ è¨˜æ†¶å¯†ç¢¼å·²æ‰¾åˆ°ï¼</h3>
            <div style="font-size: 3em; font-weight: bold; color: #FFD700; margin: 15px 0;">7391</div>
            <p>è«‹è¿”å›Googleè¡¨å–®è¼¸å…¥æ­¤å¯†ç¢¼</p>
            <button onclick="copyPassword()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; margin-top: 10px;">ğŸ“‹ è¤‡è£½å¯†ç¢¼</button>
        </div>

        <!-- æç¤ºç³»ç»Ÿ -->
        <div class="hint-system">
            <button class="hint-toggle" onclick="toggleHint()">ğŸ’¡ é¡¯ç¤ºæƒææç¤º</button>
            <div class="hint-content" id="hintContent">
                <div class="hint-section">
                    <strong>ğŸ¯ ç²¾ç¢ºä½ç½®ï¼š</strong><br>
                    â€¢ ç‰›æ£šè—è¡“æ‘ä¸»å…¥å£ç´…ç£šæ‹±é–€<br>
                    â€¢ ç¬¬ä¸‰æ’ç£šå¡Šï¼Œå¾å·¦æ•¸ç¬¬5-7å¡Š<br>
                    â€¢ è±å½¢æ’åˆ—çš„æ·±è‰²ç£šå¡Šåœ–æ¡ˆ
                </div>
                <div class="hint-section">
                    <strong>ğŸ“± æœ€ä½³æƒæï¼š</strong><br>
                    â€¢ è·é›¢ï¼š0.8-1.2ç±³<br>
                    â€¢ è§’åº¦ï¼šèˆ‡ç‰†é¢å¹³è¡Œ<br>
                    â€¢ å…‰ç·šï¼šé¿å…æ­£åˆå¼·å…‰
                </div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('DOMContentLoaded', function() {
            // æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('mainInterface').style.display = 'block';
                initializeAR();
            }, 2000);
        });

        function initializeAR() {
            const marker = document.getElementById('industryMarker');
            
            // æ ‡è®°è¯†åˆ«äº‹ä»¶
            marker.addEventListener('markerFound', function() {
                console.log('æ¨™è¨˜è­˜åˆ¥æˆåŠŸ');
                document.getElementById('passwordBox').style.display = 'block';
                
                // æŒ¯åŠ¨åé¦ˆ
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            });

            marker.addEventListener('markerLost', function() {
                console.log('æ¨™è¨˜è­˜åˆ¥ä¸¢å¤±');
                document.getElementById('passwordBox').style.display = 'none';
            });
        }

        function copyPassword() {
            navigator.clipboard.writeText('7391').then(function() {
                alert('å¯†ç¢¼ã€Œ7391ã€å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }).catch(function(err) {
                console.error('è¤‡è£½å¤±æ•—:', err);
                alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¨˜éŒ„å¯†ç¢¼ï¼š7391');
            });
        }

        function toggleHint() {
            const hintContent = document.getElementById('hintContent');
            const toggleButton = document.querySelector('.hint-toggle');
            
            if (hintContent.style.display === 'block') {
                hintContent.style.display = 'none';
                toggleButton.textContent = 'ğŸ’¡ é¡¯ç¤ºæƒææç¤º';
            } else {
                hintContent.style.display = 'block';
                toggleButton.textContent = 'ğŸ’¡ éš±è—æƒææç¤º';
            }
        }

        function goBack() {
            if (confirm('ç¢ºå®šè¦é›¢é–‹å—ï¼Ÿæ‚¨çš„é€²åº¦å°‡ä¸æœƒè¢«ä¿å­˜ã€‚')) {
                window.history.back();
            }
        }
    </script>
</body>
</html>